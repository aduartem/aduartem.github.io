<head>
  <style id="dark-mode-style">
    html {
      visibility: hidden;
    }

    html.dark-theme,
    body.dark-theme {
      background-color: #121212 !important;
      color: #e1e1e1 !important;
    }
  </style>

  <script>
    (function () {
      var theme = localStorage.getItem('theme');
      if (theme === 'dark') {
        document.documentElement.classList.add('dark-theme');
        document.body.classList.add('dark-theme');
      }
      // Importante: esto debe ejecutarse antes de cualquier renderizado
      document.addEventListener('DOMContentLoaded', function () {
        document.getElementById('dark-mode-style').textContent = 'html.dark-theme, body.dark-theme { background-color: #121212 !important; color: #e1e1e1 !important; }';
      });
      // Hacer visible la página solo después de aplicar el tema
      document.addEventListener('DOMContentLoaded', function () {
        document.documentElement.style.visibility = 'visible';
      });
    })();
  </script>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#121212" media="(prefers-color-scheme: dark)">
  <meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)">
  <!-- Meta etiquetas adicionales para SEO -->
  {% if page.description %}
  <meta name="description" content="{{ page.description | truncate: 160 }}">
  {% endif %}

  <meta name="author" content="{{ site.author | default: site.title }}">
  <meta name="robots" content="index, follow">
  <meta name="googlebot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
  <meta name="bingbot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">

  <link rel="icon" type="image/png" href="/assets/images/favicon.png">

  {%- seo -%}
  <link rel="stylesheet" href="{{ "/assets/main.css" | relative_url }}">
  {%- feed_meta -%}
  {%- if jekyll.environment == 'production' and site.google_analytics -%}
  {%- include google-analytics.html -%}
  {%- endif -%}
</head>